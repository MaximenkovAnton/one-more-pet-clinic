# Инструменты тестирования и проверки качества кода

В проекте One More Pet Clinic мы используем полный набор инструментов для обеспечения высокого качества кода, его тестируемости и безопасности.

## Модульное и интеграционное тестирование

### JUnit 5
- Основной фреймворк для тестирования в JVM
- Поддержка параметризованных тестов
- Расширяемая архитектура

### Kotest
- Мощный фреймворк для Kotlin с поддержкой различных стилей тестирования (BDD, спецификации, свойства)
- Богатый набор матчеров для проверок
- Поддержка property-based тестирования

### MockK
- Библиотека для создания моков, специально разработанная для Kotlin
- Поддержка корутин
- Удобный DSL для настройки поведения моков

### Strikt
- Библиотека для выразительных утверждений в Kotlin
- Цепочки утверждений
- Подробные сообщения об ошибках

### TestContainers
- Библиотека для запуска зависимостей в Docker-контейнерах
- Интеграция с JUnit 5
- Поддержка различных баз данных и сервисов

## Статический анализ

### Detekt
- Статический анализатор для Kotlin с настраиваемыми правилами
- Проверка стиля кода
- Выявление потенциальных проблем
- Интеграция с CI/CD

Конфигурация: `config/detekt/detekt.yml`

### ktlint
- Линтер для Kotlin, обеспечивающий соблюдение стиля кодирования
- Автоматическое форматирование кода
- Интеграция с IDE

## Проверка уязвимостей

### OWASP Dependency-Check (в планах, пока не используется)
- Сканирует зависимости проекта на известные уязвимости
- Использует базу данных CVE
- Генерирует отчеты о найденных уязвимостях

### SpotBugs с плагином FindSecBugs
- Статический анализатор для поиска потенциальных ошибок и уязвимостей
- FindSecBugs добавляет правила для поиска проблем безопасности
- Интеграция с CI/CD

Конфигурация: `config/spotbugs/exclude.xml`

## Мутационное тестирование

### PIT (PITest)
- Инструмент для мутационного тестирования
- Изменяет код и проверяет, обнаруживают ли тесты эти изменения
- Помогает оценить качество тестов

## Проверка архитектуры

### ArchUnit
- Библиотека для проверки архитектурных ограничений в тестах
- Проверка зависимостей между пакетами и классами
- Обеспечение соблюдения архитектурных принципов

## Задачи для запуска проверок

```bash
# Запуск всех тестов
./gradlew test

# Запуск проверки стиля кода
./gradlew ktlintCheck

# Запуск статического анализа
./gradlew detekt

# Запуск SpotBugs
./gradlew spotbugsMain

# Запуск мутационного тестирования
./gradlew pitest

# Запуск всех проверок качества кода
./gradlew codeQuality

```
