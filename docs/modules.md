# Модули проекта One More Pet Clinic

## Структура проекта

Проект One More Pet Clinic организован как многомодульный Gradle-проект на Kotlin. Каждый модуль имеет свою ответственность и зависимости, что обеспечивает четкое разделение обязанностей и соблюдение принципов чистой архитектуры.

## Основные модули

### Domain

Модуль содержит бизнес-сущности и правила. Это ядро приложения, которое не зависит ни от каких других модулей или внешних фреймворков.

**Ответственность:**
- Определение доменных моделей (Owner, Pet, Visit и т.д.)
- Определение value objects (Name, Email, PhoneNumber и т.д.)
- Определение доменных правил и инвариантов
- Определение доменных исключений

**Зависимости:**
- Не зависит ни от каких других модулей

**Примеры классов:**
- `Owner` - доменная модель владельца питомца
- `Pet` - доменная модель питомца
- `Visit` - доменная модель визита к ветеринару
- `Vet` - доменная модель ветеринара
- `FirstName` - value object для имени
- `LastName` - value object для фамилии
- `Address` - value object для адреса
- `Phone` - value object для телефона

### Application

Модуль содержит бизнес-логику приложения, сервисы и use cases. Зависит только от модуля Domain.

**Ответственность:**
- Реализация бизнес-логики приложения
- Оркестрация взаимодействия между доменными объектами
- Реализация use cases для различных операций

**Зависимости:**
- Domain
- Port-Input
- Port-Output

**Примеры классов:**
- `CreateOwnerUseCase` - use case для создания владельца
- `ReadOwnerUseCase` - use case для чтения информации о владельце
- `UpdateOwnerUseCase` - use case для обновления информации о владельце
- `DeleteOwnerUseCase` - use case для удаления владельца
- `ListOwnerUseCase` - use case для получения списка владельцев

### Port

Многомодульный модуль, определяющий интерфейсы для взаимодействия с внешним миром.

#### port-input

Определяет интерфейсы, через которые внешние системы могут взаимодействовать с приложением (API).

**Ответственность:**
- Определение интерфейсов для входных адаптеров
- Определение DTO для входных данных

**Зависимости:**
- Domain

**Примеры классов:**
- `InputPort` - общий функциональный интерфейс для всех входных портов
- `CreateOwnerPort` - порт для создания владельца
- `ReadOwnerPort` - порт для чтения информации о владельце
- `UpdateOwnerPort` - порт для обновления информации о владельце
- `DeleteOwnerPort` - порт для удаления владельца
- `ListOwnerPort` - порт для получения списка владельцев

#### port-output

Определяет интерфейсы, через которые приложение взаимодействует с внешними системами (репозитории, внешние сервисы).

**Ответственность:**
- Определение интерфейсов для выходных адаптеров
- Определение DTO для выходных данных

**Зависимости:**
- Domain

**Примеры классов:**
- `OutputPort` - общий функциональный интерфейс для всех выходных портов
- `SaveOwnerPort` - порт для сохранения владельца
- `FetchOwnerPort` - порт для получения информации о владельце
- `RemoveOwnerPort` - порт для удаления владельца
- `FetchAllOwnersPort` - порт для получения списка владельцев

### Adapter

Многомодульный модуль, содержащий конкретные реализации интерфейсов, определенных в Port.

#### adapter-input

Реализует интерфейсы из port-input (REST контроллеры, GraphQL резолверы и т.д.).

**Ответственность:**
- Реализация входных адаптеров
- Преобразование входных данных в формат, понятный приложению
- Обработка ошибок и возврат соответствующих HTTP-статусов

**Зависимости:**
- Domain
- Port-Input
- Application

**Примеры классов:**
- `OwnerRestController` - REST-контроллер для работы с владельцами
- `PetRestController` - REST-контроллер для работы с питомцами
- `VetRestController` - REST-контроллер для работы с ветеринарами
- `VisitRestController` - REST-контроллер для работы с визитами

#### adapter-output

Реализует интерфейсы из port-output (JPA репозитории, HTTP клиенты и т.д.).

**Ответственность:**
- Реализация выходных адаптеров
- Преобразование данных из формата приложения в формат, понятный внешним системам
- Взаимодействие с базой данных, внешними API и т.д.

**Зависимости:**
- Domain
- Port-Output

**Примеры классов:**
- `JpaOwnerRepository` - JPA-репозиторий для работы с владельцами
- `JpaPetRepository` - JPA-репозиторий для работы с питомцами
- `JpaVetRepository` - JPA-репозиторий для работы с ветеринарами
- `JpaVisitRepository` - JPA-репозиторий для работы с визитами

### Bootstrap

Модуль, который собирает все вместе и содержит точку входа в приложение (main класс).

**Ответственность:**
- Конфигурация приложения
- Внедрение зависимостей
- Запуск приложения

**Зависимости:**

***Внутренние***
- Domain
- Application
- Port-Input
- Port-Output
- Adapter-Input
- Adapter-Output

***Внешние***
- Spring Boot

## Взаимодействие между модулями

Взаимодействие между модулями строго контролируется для соблюдения принципов чистой архитектуры:

1. **Domain** не зависит ни от каких других модулей.
2. **Application** зависит от Domain и использует порты (Port-Input и Port-Output) для взаимодействия с внешним миром.
3. **Port-Input** и **Port-Output** зависят только от Domain.
4. **Adapter-Input** зависит от Port-Input и Domain.
5. **Adapter-Output** зависит от Port-Output и Domain.
6. **Bootstrap** зависит от всех остальных модулей и собирает их вместе.

Такая структура зависимостей обеспечивает:
- Независимость бизнес-логики от внешних систем
- Возможность замены адаптеров без изменения бизнес-логики
- Тестируемость каждого модуля в изоляции
